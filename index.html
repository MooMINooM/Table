<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡πÄ‡∏Å‡∏°‡∏™‡πå 2568 (V.7 Complete)</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
    :root { --primary: #1a5f7a; --secondary: #ffc107; --success: #2ecc71; --danger: #e74c3c; --dark: #2c3e50; --light: #f8f9fa; }
    body { font-family: 'Sarabun', sans-serif; background: #eef2f5; margin: 0; padding: 20px; color: var(--dark); padding-bottom: 80px; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
    
    .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 15px; }
    .tabs { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; }
    .tab-btn { padding: 10px 20px; border: none; background: #e0e0e0; border-radius: 20px; cursor: pointer; font-weight: bold; color: #555; transition: 0.3s; white-space: nowrap; }
    .tab-btn.active { background: var(--primary); color: white; box-shadow: 0 4px 6px rgba(26, 95, 122, 0.3); }
    
    .table-responsive { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 15px; min-width: 800px; font-size: 14px; }
    th { background: var(--dark); color: white; padding: 10px; text-align: left; }
    td { padding: 8px 10px; border-bottom: 1px solid #eee; vertical-align: middle; }
    tr:nth-child(even) { background: #f9f9f9; }
    
    input[type="number"] { width: 50px; padding: 5px; text-align: center; border: 2px solid #ddd; border-radius: 5px; font-weight: bold; font-size: 1.2em; color: #333; }
    input[type="number"]:focus { border-color: var(--primary); outline: none; background: #e3f2fd; }
    
    .ref-badge { background: #e3f2fd; color: #1565c0; padding: 4px 8px; border-radius: 4px; font-size: 0.85em; display: inline-block; font-weight: 600; border: 1px solid #bbdefb; cursor: pointer; min-width: 120px; text-align: center; }
    .ref-manual { background: #fff3e0; color: #e65100; border-color: #ffe0b2; }

    #toast { visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 2px; padding: 16px; position: fixed; z-index: 9999; left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 17px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
    #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }

    .control-panel { position: fixed; bottom: 20px; right: 20px; display: flex; gap: 10px; z-index: 1000; }
    .action-btn { width: 50px; height: 50px; border-radius: 50%; border: none; color: white; font-size: 1.2em; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; transition: transform 0.2s; }
    .action-btn:hover { transform: scale(1.1); }
    .btn-save { background: var(--success); }
    .btn-reset { background: var(--danger); }

    .standing-box { background: #fff; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; margin-bottom: 20px; }
    .standing-header { background: var(--primary); color: white; padding: 10px; font-weight: bold; display: flex; justify-content: space-between; }
    .st-table th { background: #f1f1f1; color: #333; font-size: 0.85em; text-align: center; }
    .st-table td { text-align: center; font-size: 0.9em; }
    .pts-cell { font-weight: bold; color: var(--primary); background: #e3f2fd; }

    /* Category Labels */
    .cat-label { font-size: 0.8em; padding: 2px 6px; border-radius: 3px; color: white; margin-left: 5px; }
    .cat-football { background-color: #27ae60; }
    .cat-volleyball { background-color: #e67e22; }
    .cat-takraw { background-color: #8e44ad; }
    .cat-petanque { background-color: #2980b9; }

    @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
    @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
</style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üèÜ ‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡πÄ‡∏Å‡∏°‡∏™‡πå 2568</h1>
        <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÅ‡∏ö‡∏ö Real-time</p>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('day1')">üìÖ 16 ‡∏ò.‡∏Ñ. (‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å)</button>
        <button class="tab-btn" onclick="switchTab('day2')">üìÖ 17 ‡∏ò.‡∏Ñ. (‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏°)</button>
        <button class="tab-btn" onclick="switchTab('day3')">üìÖ 18 ‡∏ò.‡∏Ñ. (‡∏£‡∏≠‡∏ö‡∏£‡∏≠‡∏á‡∏Ø)</button>
        <button class="tab-btn" onclick="switchTab('day4')">üìÖ 19 ‡∏ò.‡∏Ñ. (‡∏ä‡∏¥‡∏á‡∏Ø)</button>
        <button class="tab-btn" style="background:#2c3e50; color:white;" onclick="switchTab('standings')">üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</button>
    </div>

    <div id="content-area"></div>
</div>

<div id="toast">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß ‚úÖ</div>

<div class="control-panel">
    <button class="action-btn btn-save" onclick="saveDataManual()" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"><i class="fas fa-save"></i></button>
    <button class="action-btn btn-reset" onclick="resetData()" title="‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà"><i class="fas fa-trash"></i></button>
</div>

<script>
    // --- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ---
    const schoolsList = [
        "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ø", "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏≤‡∏ó‡∏Ø", "‡∏ó‡πà‡∏≤‡∏≠‡∏∏‡∏ó‡∏±‡∏¢", "‡∏´‡∏ô‡∏≠‡∏á‡∏Å‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏Ø", "‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø",
        "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á", "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø", "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á", "‡∏´‡∏ô‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏á‡∏Ø", "‡∏ã‡∏≥‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡∏Ø", "‡∏î‡πâ‡∏ß‡∏á‡∏Ø-‡∏ä‡∏≥‡∏Ø"
    ];

    const groups = {
        "A": ["‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏≤‡∏ó‡∏Ø", "‡∏ó‡πà‡∏≤‡∏≠‡∏∏‡∏ó‡∏±‡∏¢", "‡∏î‡πâ‡∏ß‡∏á‡∏Ø-‡∏ä‡∏≥‡∏Ø", "‡∏´‡∏ô‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏á‡∏Ø", "‡∏ã‡∏≥‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡∏Ø"], // ‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡∏°‡πÉ‡∏ô‡∏™‡∏≤‡∏¢ A
        "B": ["‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ø", "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á", "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø"],
        "C": ["‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø", "‡∏´‡∏ô‡∏≠‡∏á‡∏Å‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏Ø", "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á"],
        "M": ["‡∏´‡∏ô‡∏≠‡∏á‡∏Å‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏Ø", "‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø", "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á", "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á"] // ‡∏™‡∏≤‡∏¢‡∏°‡∏±‡∏ò‡∏¢‡∏°
    };

    // --- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏°‡∏ï‡∏ä‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏Å‡∏µ‡∏¨‡∏≤) ---
    // type: fb=‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•, vb=‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå, tk=‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠, pt=‡πÄ‡∏õ‡∏ï‡∏≠‡∏á
    let matches = [
        // === ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 16 ‡∏ò.‡∏Ñ. (‡∏£‡∏≠‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°) ===
        // ‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•
        { id: "M1", day: "day1", time: "08.30", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ A", t1: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏≤‡∏ó‡∏Ø", t2: "‡∏ó‡πà‡∏≤‡∏≠‡∏∏‡∏ó‡∏±‡∏¢", s1: "", s2: "", ref: "‡∏î‡πâ‡∏ß‡∏á‡∏Ø-‡∏ä‡∏≥‡∏Ø" },
        { id: "M2", day: "day1", time: "08.30", field: "‡∏™‡∏ô‡∏≤‡∏° 2", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ M", t1: "‡∏´‡∏ô‡∏≠‡∏á‡∏Å‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏Ø", t2: "‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á" },
        { id: "M3", day: "day1", time: "09.30", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ B", t1: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ø", t2: "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø" },
        { id: "M4", day: "day1", time: "09.30", field: "‡∏™‡∏ô‡∏≤‡∏° 2", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ M", t1: "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á", t2: "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á", s1: "", s2: "", ref: "‡∏´‡∏ô‡∏≠‡∏á‡∏Å‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏Ø" },
        { id: "M5", day: "day1", time: "10.30", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ C", t1: "‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø", t2: "‡∏´‡∏ô‡∏≠‡∏á‡∏Å‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á" },
        { id: "M6", day: "day1", time: "13.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏´‡∏ç‡∏¥‡∏á A", t1: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏≤‡∏ó‡∏Ø", t2: "‡∏ó‡πà‡∏≤‡∏≠‡∏∏‡∏ó‡∏±‡∏¢", s1: "", s2: "", ref: "‡∏î‡πâ‡∏ß‡∏á‡∏Ø-‡∏ä‡∏≥‡∏Ø" },
        
        // ‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå‡∏ö‡∏≠‡∏•
        { id: "V1", day: "day1", time: "08.30", field: "‡∏™‡∏ô‡∏≤‡∏°‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå", type: "vb", cat: "‡∏´‡∏ç‡∏¥‡∏á A", t1: "‡∏ó‡πà‡∏≤‡∏≠‡∏∏‡∏ó‡∏±‡∏¢", t2: "‡∏´‡∏ô‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏á‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏≤‡∏ó‡∏Ø" },
        { id: "V2", day: "day1", time: "09.30", field: "‡∏™‡∏ô‡∏≤‡∏°‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå", type: "vb", cat: "‡∏´‡∏ç‡∏¥‡∏á B", t1: "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø", t2: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á" },
        
        // ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠
        { id: "T1", day: "day1", time: "08.30", field: "‡∏™‡∏ô‡∏≤‡∏°‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠", type: "tk", cat: "‡∏ä‡∏≤‡∏¢ A", t1: "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á", t2: "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ø" },
        
        // ‡πÄ‡∏õ‡∏ï‡∏≠‡∏á
        { id: "P1", day: "day1", time: "08.30", field: "‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏õ‡∏ï‡∏≠‡∏á", type: "pt", cat: "‡∏ä‡∏≤‡∏¢ A", t1: "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á", t2: "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø", s1: "", s2: "", ref: "‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø" },

        // === ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 17 ‡∏ò.‡∏Ñ. (‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏° / ‡∏ô‡∏±‡∏î‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢) ===
        { id: "M8", day: "day2", time: "13.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ A", t1: "‡∏ó‡πà‡∏≤‡∏≠‡∏∏‡∏ó‡∏±‡∏¢", t2: "‡∏î‡πâ‡∏ß‡∏á‡∏Ø-‡∏ä‡∏≥‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏≤‡∏ó‡∏Ø" },
        { id: "M9", day: "day2", time: "13.00", field: "‡∏™‡∏ô‡∏≤‡∏° 2", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ M", t1: "‡∏†‡∏π‡∏û‡∏£‡∏∞‡∏Ø", t2: "‡πÇ‡∏ô‡∏ô‡∏°‡πà‡∏ß‡∏á", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á" },
        { id: "M10", day: "day2", time: "14.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏ä‡∏≤‡∏¢ B", t1: "‡πÇ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á", t2: "‡πÇ‡∏ô‡∏ô‡πÑ‡∏´‡∏°‡∏Ø", s1: "", s2: "", ref: "‡πÇ‡∏ô‡∏ô‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡∏Ø" },
        
        // ‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏° ‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•
        { id: "QF1", day: "day2", time: "15.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏° (1)", t1: "(‡∏ó‡∏µ‡πà 1 ‡∏™‡∏≤‡∏¢ A)", t2: "(‡∏ó‡∏µ‡πà 3 ‡∏î‡∏µ‡∏™‡∏∏‡∏î)", s1: "", s2: "", ref: "‡∏ó‡∏µ‡∏°‡∏ï‡∏Å‡∏£‡∏≠‡∏ö", next: "SF1", slot: 1 },
        { id: "QF2", day: "day2", time: "15.00", field: "‡∏™‡∏ô‡∏≤‡∏° 2", type: "fb", cat: "‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏° (2)", t1: "(‡∏ó‡∏µ‡πà 1 ‡∏™‡∏≤‡∏¢ B)", t2: "(‡∏ó‡∏µ‡πà 3 ‡∏£‡∏≠‡∏á)", s1: "", s2: "", ref: "‡∏ó‡∏µ‡∏°‡∏ï‡∏Å‡∏£‡∏≠‡∏ö", next: "SF1", slot: 2 },
        { id: "QF3", day: "day2", time: "16.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏° (3)", t1: "(‡∏ó‡∏µ‡πà 1 ‡∏™‡∏≤‡∏¢ C)", t2: "(‡∏ó‡∏µ‡πà 2 ‡∏™‡∏≤‡∏¢ A)", s1: "", s2: "", ref: "‡∏ó‡∏µ‡∏°‡∏ï‡∏Å‡∏£‡∏≠‡∏ö", next: "SF2", slot: 1 },
        { id: "QF4", day: "day2", time: "16.00", field: "‡∏™‡∏ô‡∏≤‡∏° 2", type: "fb", cat: "‡∏£‡∏≠‡∏ö 8 ‡∏ó‡∏µ‡∏° (4)", t1: "(‡∏ó‡∏µ‡πà 2 ‡∏™‡∏≤‡∏¢ B)", t2: "(‡∏ó‡∏µ‡πà 2 ‡∏™‡∏≤‡∏¢ C)", s1: "", s2: "", ref: "‡∏ó‡∏µ‡∏°‡∏ï‡∏Å‡∏£‡∏≠‡∏ö", next: "SF2", slot: 2 },

        // === ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 18 ‡∏ò.‡∏Ñ. (‡∏£‡∏≠‡∏ö‡∏£‡∏≠‡∏á‡∏ä‡∏ô‡∏∞‡πÄ‡∏•‡∏¥‡∏®) ===
        { id: "SF1", day: "day3", time: "09.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏£‡∏≠‡∏ö‡∏£‡∏≠‡∏á‡∏Ø (1)", t1: "(‡∏£‡∏≠ QF1)", t2: "(‡∏£‡∏≠ QF2)", s1: "", s2: "", ref: "‡∏ó‡∏µ‡∏°‡πÅ‡∏û‡πâ QF", next: "FINAL", slot: 1 },
        { id: "SF2", day: "day3", time: "10.00", field: "‡∏™‡∏ô‡∏≤‡∏° 1", type: "fb", cat: "‡∏£‡∏≠‡∏ö‡∏£‡∏≠‡∏á‡∏Ø (2)", t1: "(‡∏£‡∏≠ QF3)", t2: "(‡∏£‡∏≠ QF4)", s1: "", s2: "", ref: "‡∏ó‡∏µ‡∏°‡πÅ‡∏û‡πâ QF", next: "FINAL", slot: 2 },
        
        // === ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 19 ‡∏ò.‡∏Ñ. (‡∏ä‡∏¥‡∏á‡∏ä‡∏ô‡∏∞‡πÄ‡∏•‡∏¥‡∏®) ===
        { id: "FINAL", day: "day4", time: "09.00", field: "‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á", type: "fb", cat: "‡∏ä‡∏¥‡∏á‡∏ä‡∏ô‡∏∞‡πÄ‡∏•‡∏¥‡∏®", t1: "(‡∏£‡∏≠‡∏ä‡∏¥‡∏á)", t2: "(‡∏£‡∏≠‡∏ä‡∏¥‡∏á)", s1: "", s2: "", ref: "‡∏ä‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©" }
    ];

    let currentTab = 'day1';

    // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ---
    document.addEventListener('DOMContentLoaded', () => {
        loadData();
        renderPage();
    });

    function switchTab(tab) {
        currentTab = tab;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        renderPage();
    }

    function renderPage() {
        const container = document.getElementById('content-area');
        if (currentTab === 'standings') renderStandings(container);
        else renderSchedule(container, currentTab);
    }

    // --- ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏Ç‡πà‡∏á ---
    function renderSchedule(container, day) {
        const dayMatches = matches.filter(m => m.day === day);
        
        // Helper ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏Å‡∏µ‡∏¨‡∏≤
        const getCatLabel = (type, cat) => {
            let colorClass = "";
            let name = "";
            switch(type) {
                case 'fb': colorClass = 'cat-football'; name = '‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•'; break;
                case 'vb': colorClass = 'cat-volleyball'; name = '‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå'; break;
                case 'tk': colorClass = 'cat-takraw'; name = '‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠'; break;
                case 'pt': colorClass = 'cat-petanque'; name = '‡πÄ‡∏õ‡∏ï‡∏≠‡∏á'; break;
                default: colorClass = 'cat-football'; name = '‡∏Å‡∏µ‡∏¨‡∏≤';
            }
            return `<span class="cat-label ${colorClass}">${name} ${cat}</span>`;
        };

        let html = `<div class="table-responsive"><table><thead><tr>
            <th width="10%">‡πÄ‡∏ß‡∏•‡∏≤</th><th width="20%">‡∏™‡∏ô‡∏≤‡∏°/‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
            <th width="35%">‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)</th>
            <th width="25%">‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£</th>
            <th width="10%">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
        </tr></thead><tbody>`;

        if (dayMatches.length === 0) {
            html += `<tr><td colspan="5" style="text-align:center; padding:20px;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°)</td></tr>`;
        } else {
            dayMatches.forEach(m => {
                let s1 = parseInt(m.s1 || -1), s2 = parseInt(m.s2 || -1);
                let win1 = (s1 > s2) ? "color:#2ecc71; font-weight:bold; text-decoration:underline;" : "";
                let win2 = (s2 > s1) ? "color:#2ecc71; font-weight:bold; text-decoration:underline;" : "";
                
                // Conflict Check
                let conflictStyle = (m.t1.includes(m.ref) || m.t2.includes(m.ref)) ? "border:2px solid red; background:#ffebee; color:red;" : "";

                html += `<tr>
                    <td><b>${m.time}</b></td>
                    <td>${m.field}<br>${getCatLabel(m.type, m.cat)}</td>
                    <td>
                        <div style="display:flex; align-items:center; gap:5px;">
                            <span style="flex:1; text-align:right; ${win1}">${m.t1}</span>
                            <input type="number" value="${m.s1}" onchange="updateScore('${m.id}', 1, this.value)" onkeyup="if(event.key==='Enter')this.blur()">
                            :
                            <input type="number" value="${m.s2}" onchange="updateScore('${m.id}', 2, this.value)" onkeyup="if(event.key==='Enter')this.blur()">
                            <span style="flex:1; text-align:left; ${win2}">${m.t2}</span>
                        </div>
                    </td>
                    <td><span class="ref-badge" style="${conflictStyle}" onclick="manualRef('${m.id}')" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£">${m.ref}</span></td>
                    <td style="text-align:center;">${(m.s1!=="" && m.s2!=="")?"‚úÖ":"‚è≥"}</td>
                </tr>`;
            });
        }
        html += `</tbody></table></div>`;
        container.innerHTML = html;
    }

    // --- ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Standings) ---
    function renderStandings(container) {
        let stats = {}; 
        // Init stats for all known teams
        const allTeams = [...new Set([...groups["A"], ...groups["B"], ...groups["C"], ...groups["M"]])];
        allTeams.forEach(t => stats[t] = { P:0, W:0, D:0, L:0, GF:0, GA:0, PTS:0 });

        // Calculate stats
        matches.forEach(m => {
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≠‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏° (‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏∏ cat ‡πÄ‡∏õ‡πá‡∏ô A, B, C, M)
            // ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡πá‡πÑ‡∏î‡πâ
            if (m.s1 !== "" && m.s2 !== "") {
                let s1 = parseInt(m.s1), s2 = parseInt(m.s2);
                updateTeamStats(stats, m.t1, s1, s2);
                updateTeamStats(stats, m.t2, s2, s1);
            }
        });

        let html = "";
        const groupNames = { "A":"‡∏™‡∏≤‡∏¢ A", "B":"‡∏™‡∏≤‡∏¢ B", "C":"‡∏™‡∏≤‡∏¢ C", "M":"‡∏°‡∏±‡∏ò‡∏¢‡∏° (‡∏•‡∏µ‡∏Å‡∏û‡∏ö‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏î)" };
        
        Object.keys(groups).forEach(g => {
            let sortedTeams = groups[g].sort((a, b) => {
                let tA = stats[a] || {PTS:0, GF:0, GA:0}, tB = stats[b] || {PTS:0, GF:0, GA:0};
                if (tB.PTS !== tA.PTS) return tB.PTS - tA.PTS;
                if ((tB.GF-tB.GA) !== (tA.GF-tA.GA)) return (tB.GF-tB.GA) - (tA.GF-tA.GA);
                return tB.GF - tA.GF;
            });

            html += `<div class="standing-box">
                <div class="standing-header"><span>${groupNames[g]}</span></div>
                <table class="st-table"><thead><tr>
                    <th>‡∏ó‡∏µ‡∏°</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>+/-</th><th class="pts-cell">PTS</th>
                </tr></thead><tbody>`;
            
            sortedTeams.forEach(t => {
                let s = stats[t] || { P:0, W:0, D:0, L:0, GF:0, GA:0, PTS:0 };
                html += `<tr><td>${t}</td><td>${s.P}</td><td>${s.W}</td><td>${s.D}</td><td>${s.L}</td><td>${s.GF}</td><td>${s.GA}</td><td>${s.GF-s.GA}</td><td class="pts-cell">${s.PTS}</td></tr>`;
            });
            html += `</tbody></table></div>`;
        });
        container.innerHTML = html;
    }

    function updateTeamStats(stats, team, gf, ga) {
        if (!stats[team]) return;
        stats[team].P++; stats[team].GF += gf; stats[team].GA += ga;
        if (gf > ga) { stats[team].W++; stats[team].PTS += 3; }
        else if (gf === ga) { stats[team].D++; stats[team].PTS += 1; }
        else { stats[team].L++; }
    }

    // --- Logic ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô & Auto Flow ---
    function updateScore(id, slot, val) {
        let m = matches.find(x => x.id === id);
        if (slot === 1) m.s1 = val; else m.s2 = val;
        
        // Auto Flow
        if (m.s1 !== "" && m.s2 !== "" && m.next) {
            let winner = parseInt(m.s1) > parseInt(m.s2) ? m.t1 : m.t2;
            if (m.s1 === m.s2) winner = prompt("‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô! ‡πÉ‡∏Ñ‡∏£‡∏ä‡∏ô‡∏∞‡∏à‡∏∏‡∏î‡πÇ‡∏ó‡∏©? (‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°)", m.t1); 

            let nextMatch = matches.find(x => x.id === m.next);
            if (nextMatch) {
                if (m.slot === 1) nextMatch.t1 = winner; else nextMatch.t2 = winner;
            }
        }
        
        saveData();
        showToast();
        renderPage(); 
    }

    function manualRef(id) {
        let currentRef = matches.find(m => m.id === id).ref;
        let newRef = prompt(`‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£ (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${currentRef}):`, currentRef);
        if (newRef) { matches.find(m => m.id === id).ref = newRef; saveData(); renderPage(); }
    }

    function showToast() {
        var x = document.getElementById("toast");
        x.className = "show";
        setTimeout(function(){ x.className = x.className.replace("show", ""); }, 2000);
    }

    function saveData() { localStorage.setItem('ns_games_v7', JSON.stringify(matches)); }
    function saveDataManual() { saveData(); alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!"); }
    function loadData() { let d = localStorage.getItem('ns_games_v7'); if(d) matches = JSON.parse(d); }
    function resetData() { if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) { localStorage.removeItem('ns_games_v7'); location.reload(); } }
</script>

</body>
</html>
